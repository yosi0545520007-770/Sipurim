{"version":3,"file":"molad.js","sources":["../../../src/molad.ts"],"sourcesContent":["import {monthsInYear} from './hdateBase';\n\n/**\n * Represents a molad, the moment when the new moon is \"born\"\n */\nexport type Molad = {\n  /** Hebrew year */\n  readonly year: number;\n  /** Hebrew month */\n  readonly month: number;\n  /** Day of Week (0=Sunday, 6=Saturday) */\n  readonly dayOfWeek: number;\n  /** hour of day (0-23) */\n  readonly hour: number;\n  /** minutes past hour (0-59) */\n  readonly minutes: number;\n  /** parts of a minute (0-17) */\n  readonly chalakim: number;\n};\n\n/**\n * Calculates the molad for a Hebrew month\n */\nexport function molad(year: number, month: number): Molad {\n  let m_adj = month - 7;\n  if (m_adj < 0) {\n    m_adj += monthsInYear(year);\n  }\n\n  const mElapsed =\n    235 * Math.floor((year - 1) / 19) + // Months in complete 19 year lunar (Metonic) cycles so far\n    12 * ((year - 1) % 19) + // Regular months in this cycle\n    Math.floor((7 * ((year - 1) % 19) + 1) / 19) + // Leap months this cycle\n    m_adj; // add elapsed months till the start of the molad of the month\n\n  const pElapsed = 204 + Math.floor(793 * (mElapsed % 1080));\n\n  const hElapsed =\n    5 +\n    12 * mElapsed +\n    793 * Math.floor(mElapsed / 1080) +\n    Math.floor(pElapsed / 1080) -\n    6;\n\n  const parts = (pElapsed % 1080) + 1080 * (hElapsed % 24);\n\n  const chalakim = parts % 1080;\n\n  const day = 1 + 29 * mElapsed + Math.floor(hElapsed / 24);\n\n  return {\n    year,\n    month,\n    dayOfWeek: day % 7,\n    hour: hElapsed % 24,\n    minutes: Math.floor(chalakim / 18),\n    chalakim: chalakim % 18,\n  };\n}\n"],"names":[],"mappings":";;;AAoBA;;AAEG;AACG,SAAU,KAAK,CAAC,IAAY,EAAE,KAAa,EAAA;AAC/C,IAAA,IAAI,KAAK,GAAG,KAAK,GAAG,CAAC;AACrB,IAAA,IAAI,KAAK,GAAG,CAAC,EAAE;AACb,QAAA,KAAK,IAAI,YAAY,CAAC,IAAI,CAAC;IAC7B;AAEA,IAAA,MAAM,QAAQ,GACZ,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,GAAG,CAAC,IAAI,EAAE,CAAC;QACjC,EAAE,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,EAAE,CAAC;QACtB,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;QAC5C,KAAK,CAAC;AAER,IAAA,MAAM,QAAQ,GAAG,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,QAAQ,GAAG,IAAI,CAAC,CAAC;IAE1D,MAAM,QAAQ,GACZ,CAAC;AACD,QAAA,EAAE,GAAG,QAAQ;QACb,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;AACjC,QAAA,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;AAC3B,QAAA,CAAC;AAEH,IAAA,MAAM,KAAK,GAAG,CAAC,QAAQ,GAAG,IAAI,IAAI,IAAI,IAAI,QAAQ,GAAG,EAAE,CAAC;AAExD,IAAA,MAAM,QAAQ,GAAG,KAAK,GAAG,IAAI;AAE7B,IAAA,MAAM,GAAG,GAAG,CAAC,GAAG,EAAE,GAAG,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,EAAE,CAAC;IAEzD,OAAO;QACL,IAAI;QACJ,KAAK;QACL,SAAS,EAAE,GAAG,GAAG,CAAC;QAClB,IAAI,EAAE,QAAQ,GAAG,EAAE;QACnB,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,EAAE,CAAC;QAClC,QAAQ,EAAE,QAAQ,GAAG,EAAE;KACxB;AACH;;;;"}
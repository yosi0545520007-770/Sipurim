{"version":3,"file":"ParshaEvent.js","sources":["../../../src/ParshaEvent.ts"],"sourcesContent":["import {Event, flags} from './event';\nimport {HDate, isoDateString} from '@hebcal/hdate';\nimport {renderParshaName} from './parshaName';\nimport './locale'; // Adds Hebrew and Ashkenazic translations\n\n/**\n * Represents one of 54 weekly Torah portions, always on a Saturday\n */\nexport class ParshaEvent extends Event {\n  readonly parsha: string[];\n  readonly il: boolean;\n  readonly num: number | number[];\n  /**\n   * @param parsha - untranslated name of single or double parsha,\n   *   such as ['Bereshit'] or ['Achrei Mot', 'Kedoshim']\n   */\n  constructor(\n    date: HDate,\n    parsha: string[],\n    il = false,\n    num: number | number[] = -1\n  ) {\n    if (!Array.isArray(parsha) || parsha.length === 0 || parsha.length > 2) {\n      throw new TypeError('Bad parsha argument');\n    }\n    const desc = 'Parashat ' + parsha.join('-');\n    super(date, desc, flags.PARSHA_HASHAVUA);\n    this.parsha = parsha;\n    this.il = Boolean(il);\n    this.num = num || -1;\n  }\n  /**\n   * @param [locale] Optional locale name (i.e: `'he'`, `'fr'`). Defaults to active locale.\n   */\n  render(locale?: string): string {\n    return renderParshaName(this.parsha, locale);\n  }\n\n  basename(): string {\n    return this.parsha.join('-');\n  }\n\n  url(): string | undefined {\n    const year = this.getDate().greg().getFullYear();\n    if (year < 100) {\n      return undefined;\n    }\n    const dt = this.urlDateSuffix();\n    const url =\n      'https://www.hebcal.com/sedrot/' +\n      this.basename().toLowerCase().replace(/'/g, '').replace(/ /g, '-') +\n      '-' +\n      dt;\n    return this.il ? url + '?i=on' : url;\n  }\n\n  urlDateSuffix(): string {\n    const isoDate = isoDateString(this.getDate().greg());\n    return isoDate.replace(/-/g, '');\n  }\n}\n"],"names":[],"mappings":";;;;;;AAKA;;AAEG;AACG,MAAO,WAAY,SAAQ,KAAK,CAAA;AAIpC;;;AAGG;IACH,WAAA,CACE,IAAW,EACX,MAAgB,EAChB,EAAE,GAAG,KAAK,EACV,GAAA,GAAyB,EAAE,EAAA;QAE3B,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;AACtE,YAAA,MAAM,IAAI,SAAS,CAAC,qBAAqB,CAAC;QAC5C;QACA,MAAM,IAAI,GAAG,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC;QAC3C,KAAK,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,eAAe,CAAC;AACxC,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM;AACpB,QAAA,IAAI,CAAC,EAAE,GAAG,OAAO,CAAC,EAAE,CAAC;AACrB,QAAA,IAAI,CAAC,GAAG,GAAG,GAAG,IAAI,EAAE;IACtB;AACA;;AAEG;AACH,IAAA,MAAM,CAAC,MAAe,EAAA;QACpB,OAAO,gBAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC;IAC9C;IAEA,QAAQ,GAAA;QACN,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC;IAC9B;IAEA,GAAG,GAAA;AACD,QAAA,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,CAAC,WAAW,EAAE;AAChD,QAAA,IAAI,IAAI,GAAG,GAAG,EAAE;AACd,YAAA,OAAO,SAAS;QAClB;AACA,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,aAAa,EAAE;QAC/B,MAAM,GAAG,GACP,gCAAgC;AAChC,YAAA,IAAI,CAAC,QAAQ,EAAE,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC;YAClE,GAAG;AACH,YAAA,EAAE;AACJ,QAAA,OAAO,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,OAAO,GAAG,GAAG;IACtC;IAEA,aAAa,GAAA;AACX,QAAA,MAAM,OAAO,GAAG,aAAa,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,CAAC;QACpD,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC;IAClC;AACD;;;;"}
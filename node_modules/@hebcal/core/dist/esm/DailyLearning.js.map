{"version":3,"file":"DailyLearning.js","sources":["../../../src/DailyLearning.ts"],"sourcesContent":["import {HDate} from '@hebcal/hdate';\nimport {Event} from './event';\n\ntype LearningCalendar = {\n  fn: Function;\n  startDate?: HDate;\n};\nconst cals = new Map<string, LearningCalendar>();\n\n/**\n * Plug-ins for daily learning calendars such as Daf Yomi, Mishna Yomi, Nach Yomi, etc.\n *\n * Learning schedules are provided by the `@hebcal/learning` package.\n */\nexport class DailyLearning {\n  /**\n   * Register a new learning calendar.\n   * @param name case insensitive\n   * @param calendar a function that returns an `Event` or `null`\n   * @param startDate the first date for which this calendar is valid\n   */\n  static addCalendar(name: string, calendar: Function, startDate?: HDate) {\n    if (typeof calendar !== 'function') {\n      throw new TypeError(`Invalid calendar function: ${calendar}`);\n    }\n    cals.set(name.toLowerCase(), {\n      fn: calendar,\n      startDate: startDate,\n    });\n  }\n\n  /**\n   * Returns an event from daily calendar for a given date. Returns `null` if there\n   * is no learning from this calendar on this date.\n   * @param name case insensitive\n   * @param hd Hebrew Date\n   * @param il true for Israel, false for Diaspora\n   */\n  static lookup(name: string, hd: HDate, il: boolean): Event | null {\n    const cal = cals.get(name.toLowerCase());\n    if (typeof cal === 'object') {\n      return cal.fn(hd, il);\n    }\n    return null;\n  }\n\n  static getStartDate(name: string): HDate | undefined {\n    const cal = cals.get(name.toLowerCase());\n    if (typeof cal === 'object') {\n      return cal.startDate;\n    }\n    return undefined;\n  }\n\n  /**\n   * Tests to see if learning calendar has been registered\n   * @param name case insensitive\n   */\n  static has(name: string): boolean {\n    return cals.has(name.toLowerCase());\n  }\n\n  /** Returns the names of all calendars registered */\n  static getCalendars(): string[] {\n    return Array.from(cals.keys());\n  }\n}\n"],"names":[],"mappings":";AAOA,MAAM,IAAI,GAAG,IAAI,GAAG,EAA4B;AAEhD;;;;AAIG;MACU,aAAa,CAAA;AACxB;;;;;AAKG;AACH,IAAA,OAAO,WAAW,CAAC,IAAY,EAAE,QAAkB,EAAE,SAAiB,EAAA;AACpE,QAAA,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE;AAClC,YAAA,MAAM,IAAI,SAAS,CAAC,8BAA8B,QAAQ,CAAA,CAAE,CAAC;QAC/D;AACA,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE;AAC3B,YAAA,EAAE,EAAE,QAAQ;AACZ,YAAA,SAAS,EAAE,SAAS;AACrB,SAAA,CAAC;IACJ;AAEA;;;;;;AAMG;AACH,IAAA,OAAO,MAAM,CAAC,IAAY,EAAE,EAAS,EAAE,EAAW,EAAA;QAChD,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;AACxC,QAAA,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;YAC3B,OAAO,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;QACvB;AACA,QAAA,OAAO,IAAI;IACb;IAEA,OAAO,YAAY,CAAC,IAAY,EAAA;QAC9B,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;AACxC,QAAA,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;YAC3B,OAAO,GAAG,CAAC,SAAS;QACtB;AACA,QAAA,OAAO,SAAS;IAClB;AAEA;;;AAGG;IACH,OAAO,GAAG,CAAC,IAAY,EAAA;QACrB,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;IACrC;;AAGA,IAAA,OAAO,YAAY,GAAA;QACjB,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;IAChC;AACD;;;;"}
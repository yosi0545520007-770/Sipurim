{"version":3,"file":"hallel.js","sources":["../../../src/hallel.ts"],"sourcesContent":["import {HDate, months} from '@hebcal/hdate';\nimport {Event, flags} from './event';\n\nconst NONE = 0;\nconst HALF = 1;\nconst WHOLE = 2;\n\n/**\n * @private\n */\nexport function hallel_(events: Event[], hdate: HDate): number {\n  const whole = events\n    .filter(ev => {\n      const desc: string = ev.getDesc();\n      const hd: HDate = ev.getDate();\n      const month = hd.getMonth();\n      const mday = hd.getDate();\n      return (\n        desc.startsWith('Chanukah') ||\n        desc.startsWith('Shavuot') ||\n        desc.startsWith('Sukkot') ||\n        (month === months.NISAN &&\n          (mday === 15 || mday === 16) &&\n          ev.getFlags() & flags.CHAG) || // Pesach\n        desc === \"Yom HaAtzma'ut\" ||\n        desc === 'Yom Yerushalayim'\n      );\n    })\n    .map(ev => {\n      return ev.getDate().abs();\n    });\n\n  const abs = hdate.abs();\n  if (whole.includes(abs)) {\n    return WHOLE;\n  }\n\n  const half = events\n    .filter(ev => {\n      const desc = ev.getDesc();\n      return (\n        ev.getFlags() & flags.ROSH_CHODESH ||\n        (desc.startsWith('Pesach') &&\n          desc !== 'Pesach I' &&\n          desc !== 'Pesach II')\n      );\n    })\n    .map(ev => {\n      return ev.getDate().abs();\n    });\n\n  if (half.includes(abs)) {\n    return HALF;\n  }\n\n  return NONE;\n}\n"],"names":[],"mappings":";;;;AAGA,MAAM,IAAI,GAAG,CAAC;AACd,MAAM,IAAI,GAAG,CAAC;AACd,MAAM,KAAK,GAAG,CAAC;AAEf;;AAEG;AACG,SAAU,OAAO,CAAC,MAAe,EAAE,KAAY,EAAA;IACnD,MAAM,KAAK,GAAG;SACX,MAAM,CAAC,EAAE,IAAG;AACX,QAAA,MAAM,IAAI,GAAW,EAAE,CAAC,OAAO,EAAE;AACjC,QAAA,MAAM,EAAE,GAAU,EAAE,CAAC,OAAO,EAAE;AAC9B,QAAA,MAAM,KAAK,GAAG,EAAE,CAAC,QAAQ,EAAE;AAC3B,QAAA,MAAM,IAAI,GAAG,EAAE,CAAC,OAAO,EAAE;AACzB,QAAA,QACE,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC;AAC3B,YAAA,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC;AAC1B,YAAA,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC;AACzB,aAAC,KAAK,KAAK,MAAM,CAAC,KAAK;AACrB,iBAAC,IAAI,KAAK,EAAE,IAAI,IAAI,KAAK,EAAE,CAAC;gBAC5B,EAAE,CAAC,QAAQ,EAAE,GAAG,KAAK,CAAC,IAAI,CAAC;AAC7B,YAAA,IAAI,KAAK,gBAAgB;YACzB,IAAI,KAAK,kBAAkB;AAE/B,IAAA,CAAC;SACA,GAAG,CAAC,EAAE,IAAG;AACR,QAAA,OAAO,EAAE,CAAC,OAAO,EAAE,CAAC,GAAG,EAAE;AAC3B,IAAA,CAAC,CAAC;AAEJ,IAAA,MAAM,GAAG,GAAG,KAAK,CAAC,GAAG,EAAE;AACvB,IAAA,IAAI,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;AACvB,QAAA,OAAO,KAAK;IACd;IAEA,MAAM,IAAI,GAAG;SACV,MAAM,CAAC,EAAE,IAAG;AACX,QAAA,MAAM,IAAI,GAAG,EAAE,CAAC,OAAO,EAAE;QACzB,QACE,EAAE,CAAC,QAAQ,EAAE,GAAG,KAAK,CAAC,YAAY;AAClC,aAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC;AACxB,gBAAA,IAAI,KAAK,UAAU;AACnB,gBAAA,IAAI,KAAK,WAAW,CAAC;AAE3B,IAAA,CAAC;SACA,GAAG,CAAC,EAAE,IAAG;AACR,QAAA,OAAO,EAAE,CAAC,OAAO,EAAE,CAAC,GAAG,EAAE;AAC3B,IAAA,CAAC,CAAC;AAEJ,IAAA,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;AACtB,QAAA,OAAO,IAAI;IACb;AAEA,IAAA,OAAO,IAAI;AACb;;;;"}
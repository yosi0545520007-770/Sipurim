import{b as y,c as f,r as a,s as o,j as e,L as j}from"./index-DhAAA4kQ.js";function N(){const n=y(),[m]=f(),[i,g]=a.useState(""),[c,x]=a.useState(""),[d,r]=a.useState(null),[u,l]=a.useState(!1);a.useEffect(()=>{o.auth.getSession().then(({data:s})=>{s.session&&n("/admin",{replace:!0})})},[n]);async function h(s){s.preventDefault();try{r(null),l(!0);const{error:t}=await o.auth.signInWithPassword({email:i.trim(),password:c});if(t)throw t;const b=m.get("redirect")||"/admin";n(b,{replace:!0})}catch(t){r(t.message||"שגיאה בהתחברות")}finally{l(!1)}}async function p(){try{r(null),l(!0);const s=`${window.location.origin}/login`,{error:t}=await o.auth.signInWithOAuth({provider:"google",options:{redirectTo:s}});if(t)throw t}catch(s){l(!1),r(s.message||"שגיאה ב-Google Login")}}return e.jsxs("section",{className:"p-6 max-w-sm mx-auto",dir:"rtl",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"התחברות"}),d&&e.jsx("div",{className:"bg-red-50 text-red-700 p-3 rounded mb-3",children:d}),e.jsxs("form",{onSubmit:h,className:"grid gap-3 bg-white border rounded-2xl p-4",children:[e.jsxs("div",{className:"grid gap-1",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"אימייל"}),e.jsx("input",{type:"email",required:!0,className:"border rounded-lg p-3",value:i,onChange:s=>g(s.target.value),placeholder:"you@gmail.com"})]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"סיסמה"}),e.jsx("input",{type:"password",required:!0,className:"border rounded-lg p-3",value:c,onChange:s=>x(s.target.value),placeholder:"••••••••"})]}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded-lg py-2 disabled:opacity-50",disabled:u,children:"התחברות"})]}),e.jsx("div",{className:"my-4 text-center text-sm text-gray-500",children:"או"}),e.jsx("button",{onClick:p,className:"w-full border rounded-lg py-2 bg-white hover:bg-gray-50 disabled:opacity-50",disabled:u,children:"התחברות עם Google"}),e.jsx("div",{className:"text-xs text-gray-500 mt-6 text-center",children:e.jsx(j,{to:"/",children:"חזרה לעמוד הבית"})})]})}export{N as Component};
